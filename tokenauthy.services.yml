services:
  tokenauthy.middleware:
    class: Drupal\tokenauthy\Stackmiddleware\AuthTokenMiddleware
    arguments:
      - '@session'
      - '@session_configuration'
      - '@entity_type.manager'
      - '@tokenauthy'
    tags:
      - { name: http_middleware, priority: 20 }
  tokenauthy.page_cache_request_policy.by_pass_auth_token:
    class: Drupal\tokenauthy\PageCache\AllowAuthTokenRequests
    public: false
    tags:
      - { name: page_cache_request_policy }
  tokenauthy:
    class: Drupal\tokenauthy\Services\TokenAuthy
    arguments:
      - '@config.factory'
      - '@entity_type.manager'
